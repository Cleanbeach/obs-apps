apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: obs-otelcol
  namespace: argocd
  finalizers:
  - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    namespace: default
    server: https://kubernetes.default.svc
  project: default
  sources:    
   - repoURL: https://github.com/open-telemetry/opentelemetry-helm-charts.git
     path: charts/opentelemetry-collector/ 
     targetRevision: HEAD
     helm:
        valueFiles:
        - $values/apps/otelcol/values.yaml
        # - $values/apps/otelcol/otelcol-value-version.yaml
        # - $values/apps/otelcol/otelcol-service.yaml
      # parameters:
      #   # mode: "deployment"
      #   - name: mode
      #     value: "deployment"
   - repoURL: https://github.com/Cleanbeach/obs-apps.git
     path: apps/otelcol/
     targetRevision: HEAD
     ref: values